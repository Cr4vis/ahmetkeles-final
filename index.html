<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ahmet Keles | Motion Director</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700;900&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
    
    <style>
        /* Mobile Viewport Fix */
        body { font-family: 'Inter', sans-serif; background-color: #000; color: white; margin: 0; padding: 0; overflow: hidden; }
        #viewport { width: 100%; height: 100vh; height: 100dvh; position: relative; overflow: hidden; }
        #content-wrapper { width: 100%; position: absolute; top: 0; left: 0; will-change: transform; }
        
        .snap-section { height: 100vh; height: 100dvh; width: 100%; position: relative; display: flex; overflow: hidden; flex-shrink: 0; }
        .free-section { min-height: 100vh; min-height: 100dvh; width: 100%; position: relative; display: flex; flex-direction: column; flex-shrink: 0; }
        
        /* Vimeo Background Wrapper */
        .vimeo-wrapper { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; overflow: hidden; z-index: 0; }
        .vimeo-wrapper iframe { width: 100vw; height: 56.25vw; min-height: 100vh; min-width: 177.77vh; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); }

        /* Typography & UI */
        .hero-content { position: absolute; bottom: 15%; left: 6%; z-index: 20; max-width: 90%; pointer-events: none; }
        @media (min-width: 768px) { .hero-content { bottom: 10%; } }
        .hero-subtitle { font-size: 0.875rem; font-weight: 700; letter-spacing: 0.25em; text-transform: uppercase; color: #9ca3af; margin-bottom: 1rem; display: block; border-left: 2px solid white; padding-left: 1rem; }
        .hero-title { font-size: clamp(4rem, 9vw, 11rem); font-weight: 900; line-height: 0.85; letter-spacing: -0.04em; text-transform: uppercase; color: white; }
        .gradient-text { background: linear-gradient(to right, #ffffff 0%, #6b7280 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fadeIn { animation: fadeIn 1s ease-out forwards; }

        .glass-btn { background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); transition: all 0.3s ease; cursor: pointer; }
        .glass-btn:hover { background: rgba(255, 255, 255, 0.2); border-color: rgba(255, 255, 255, 0.4); }
        
        /* Archive & Modals */
        .archive-card { position: relative; overflow: hidden; background: #111; }
        .archive-iframe-wrapper { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; }
        
        /* DUZELTME 1: Zoom scale efekti kaldirildi, sadece opacity/filter kaldi */
        .archive-iframe-wrapper iframe { width: 100%; height: 100%; transform: scale(1.5); pointer-events: none; opacity: 0.6; filter: grayscale(100%); transition: opacity 0.5s ease, filter 0.5s ease; }
        .archive-card:hover iframe { opacity: 1; filter: grayscale(0%); } 
        
        .modal-overlay { opacity: 0; pointer-events: none; transition: opacity 0.4s ease; }
        .modal-overlay.active { opacity: 1; pointer-events: all; }
        .apple-box { border-radius: 2rem; background: rgba(10, 10, 10, 0.95); backdrop-filter: blur(30px) saturate(180%); border: 1px solid rgba(255, 255, 255, 0.1); box-shadow: 0 40px 80px -20px rgba(0, 0, 0, 0.8); }
        
        .mobile-menu-overlay { position: fixed; inset: 0; z-index: 90; background: rgba(5, 5, 5, 0.95); display: flex; flex-direction: column; justify-content: center; align-items: center; opacity: 0; pointer-events: none; transition: opacity 0.5s ease; }
        .mobile-menu-overlay.active { opacity: 1; pointer-events: all; }
        .mobile-link { font-size: 3rem; font-weight: 900; text-transform: uppercase; letter-spacing: -0.02em; margin-bottom: 2rem; color: white; text-align: center; opacity: 0; transform: translateY(30px); transition: color 0.3s ease; cursor: pointer; }
        .mobile-link:hover { color: #9ca3af; }

        /* Scrollbar styling for modal */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #111; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 3px; }
    </style>
</head>
<body>

    <nav class="fixed top-0 left-0 w-full z-[100] px-8 py-8 flex justify-between items-center mix-blend-difference pointer-events-none">
        <a href="#" onclick="scrollToTop()" class="text-4xl font-black tracking-tighter uppercase pointer-events-auto cursor-pointer text-white relative z-[102]">Ahmet Keles.</a>
        <div class="hidden md:flex space-x-8 text-sm font-medium tracking-wide pointer-events-auto uppercase">
            <a href="index.html" class="text-white border-b border-white pb-1">Motion</a>
            <a href="photo.html" class="hover:text-white/70 transition text-white">Photography</a>
            <button onclick="toggleAbout(true)" class="hover:text-white/70 transition uppercase text-white">ABOUT</button>
        </div>
        <button onclick="toggleMobileMenu()" class="md:hidden pointer-events-auto text-white focus:outline-none z-[102] relative">
            <svg id="menu-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-8 h-8"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 9h16.5m-16.5 6.75h16.5" /></svg>
        </button>
    </nav>

    <div id="mobile-menu" class="mobile-menu-overlay">
        <a href="index.html" class="mobile-link text-gray-500">Motion</a>
        <a href="photo.html" class="mobile-link">Photography</a>
        <button onclick="toggleAbout(true); toggleMobileMenu();" class="mobile-link">About</button>
    </div>

    <div id="viewport"><div id="content-wrapper"></div></div>

    <div id="about-modal" class="modal-overlay fixed inset-0 z-[120] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm">
        <div class="absolute inset-0" onclick="toggleAbout(false)"></div>
        <div class="relative w-full max-w-3xl p-6 md:p-16 max-h-[90vh] overflow-y-auto apple-box transform scale-95 opacity-0" id="about-box">
            <button onclick="toggleAbout(false)" class="absolute top-4 right-4 md:top-8 md:right-8 w-8 h-8 md:w-10 md:h-10 rounded-full bg-white/10 flex items-center justify-center hover:bg-white/20 transition z-50">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 md:w-5 md:h-5 text-white"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>
            </button>
            <div class="text-center mt-6 md:mt-0">
                <h2 class="text-4xl md:text-7xl font-black tracking-tighter text-white mb-6 md:mb-10">Hi!</h2>
                <div class="space-y-4 md:space-y-6 text-sm md:text-xl text-gray-300 font-light leading-relaxed">
                    <p>I'm a London-based 3D Motion Designer / Photographer.</p>
                    <p>With 15 years of experience in photography and 3 years of experience in 3D motion design, I've been fortunate enough to work with some of the best brands around the world.</p>
                    <p>My years of experience in photography and videography allow me to bring a unique perspective to my 3D work. My broad skill set allows me to either join teams remotely or on-location or take on projects from initial concept to the very end result on my own.</p>
                    <p class="text-white font-normal pt-2">Please feel free to get in touch with me.</p>
                </div>
                <div class="mt-8 md:mt-10 pb-4">
                    <a href="mailto:hi@ahmetkeles.co.uk" class="inline-block glass-btn px-6 py-3 md:px-10 md:py-5 rounded-full text-lg md:text-3xl font-bold text-white transition-all hover:bg-white hover:text-black hover:scale-105">hi@ahmetkeles.co.uk</a>
                </div>
            </div>
        </div>
    </div>

    <div id="video-modal" class="modal-overlay fixed inset-0 z-[130] flex items-center justify-center p-0 bg-black/95 backdrop-blur-md">
        <div class="absolute inset-0" onclick="closeVideoModal()"></div>
        
        <div class="relative w-full h-full md:h-auto md:max-h-[95vh] md:max-w-6xl flex flex-col apple-box transform scale-95 opacity-0 overflow-hidden" id="video-box">
            
            <button onclick="closeVideoModal()" class="absolute top-4 right-4 z-50 w-10 h-10 rounded-full bg-white/10 flex items-center justify-center hover:bg-white/20 transition text-white">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>
            </button>

            <div class="w-full h-full overflow-y-auto p-4 md:p-8">
                
                <div class="w-full aspect-video bg-black rounded-xl overflow-hidden shadow-2xl mb-8">
                    <iframe id="modal-iframe" src="" class="w-full h-full" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>
                </div>

                <div class="mb-12 border-b border-gray-800 pb-8">
                     <h2 id="modal-title" class="text-3xl font-bold uppercase mb-2">Project Title</h2>
                     <p id="modal-category" class="text-gray-400 font-mono text-sm uppercase tracking-widest">Category</p>
                </div>

                <div id="extra-videos-container" class="hidden">
                    <h3 class="text-sm font-mono text-gray-500 uppercase mb-6 block">More Videos from this project</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6" id="extra-videos-grid">
                        </div>
                </div>

            </div>
        </div>
    </div>

    <script>
        const wrapper = document.getElementById('content-wrapper');
        let siteData = {};

        // DUZELTME 2 & 3: Intersection Observer ile Lazy Loading ve Performans
        // Sadece ekrana giren videolari yukle
        const observerOptions = {
            root: null,
            rootMargin: '100px',
            threshold: 0.1
        };

        const lazyLoadObserver = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const iframe = entry.target;
                    if (iframe.dataset.src) {
                        iframe.src = iframe.dataset.src;
                        iframe.removeAttribute('data-src');
                        // Yuklendikten sonra gozlemlemeyi birak
                        observer.unobserve(iframe);
                    }
                }
            });
        }, observerOptions);

        fetch('data.json')
            .then(response => response.json())
            .then(data => {
                siteData = data;
                initSite();
            })
            .catch(error => console.error('Error loading data:', error));

        function initSite() {
            // HERO SECTION (VIMEO)
            if (siteData.heroProjects) {
                siteData.heroProjects.forEach((project, index) => {
                    const section = document.createElement('section');
                    section.className = 'snap-section bg-black';
                    section.setAttribute('data-type', 'hero');
                    
                    const words = project.title.split(' ');
                    let titleHTML = words.length > 1 
                        ? `${words.slice(0, -1).join(' ')} <br> <span class="gradient-text">${words[words.length - 1]}</span>`
                        : `<span class="gradient-text">${project.title}</span>`;

                    section.innerHTML = `
                        <div class="vimeo-wrapper">
                            <iframe src="https://player.vimeo.com/video/${project.vimeoId}?background=1&autoplay=1&loop=1&byline=0&title=0&muted=1" frameborder="0" allow="autoplay; fullscreen" allowfullscreen></iframe>
                        </div>
                        <div class="absolute inset-0 bg-black/40"></div>
                        
                        <div class="hero-content">
                            <span class="hero-subtitle opacity-0 animate-fadeIn" style="animation-delay: 0.1s">${project.subtitle}</span>
                            <h1 class="hero-title opacity-0 animate-fadeIn" style="animation-delay: 0.3s">${titleHTML}</h1>
                        </div>
                        
                        <div class="absolute bottom-10 right-10 z-20 flex items-center gap-6">
                            <div class="text-xs font-mono text-gray-400">0${index + 1} — 0${siteData.heroProjects.length}</div>
                            <button onclick="openProjectModal('${project.vimeoId}', '${project.title.replace(/'/g, "\\'")}', '${project.subtitle}', [])" class="glass-btn w-14 h-14 rounded-full flex items-center justify-center hover:bg-white/20 transition group">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 group-hover:translate-y-1 transition-transform"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M12 12.75l-3.25-3.25m3.25 3.25l3.25-3.25M12 12.75V3" /></svg>
                            </button>
                        </div>
                    `;
                    wrapper.appendChild(section);
                });
            }

            // ARCHIVE SECTION (VIMEO)
            const gridSection = document.createElement('section');
            gridSection.className = 'free-section bg-[#050505] pt-24 pb-8';
            gridSection.setAttribute('data-type', 'archive');
            
            let gridHTML = `
                <div class="w-full px-4 md:px-8">
                    <div class="flex items-end justify-between mb-12 border-b border-gray-800 pb-4">
                        <h2 class="text-5xl md:text-7xl font-black tracking-tighter text-white uppercase">Archive<span class="text-gray-600">.</span></h2>
                        <span class="text-gray-500 font-mono text-xs mb-2">SCROLL TO VIEW</span>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-12 w-full">
            `;

            if (siteData.gridProjects) {
                siteData.gridProjects.forEach(item => {
                    const extraVideosJson = JSON.stringify(item.extraVideos || []).replace(/"/g, '&quot;');
                    
                    // DUZELTME 1 Devami: Mouse Hover Eventleri ve api=1 parametresi
                    // Lazy load icin src yerine data-src kullaniyoruz
                    
                    gridHTML += `
                        <div class="archive-card relative aspect-video bg-gray-900 rounded-sm overflow-hidden cursor-pointer group w-full" 
                             onclick="openProjectModal('${item.vimeoId}', '${item.title}', '${item.category}', ${extraVideosJson})"
                             onmouseenter="playPreview(this)" 
                             onmouseleave="resetPreview(this)">
                            
                            <div class="archive-iframe-wrapper">
                                <iframe data-src="https://player.vimeo.com/video/${item.vimeoId}?background=1&autoplay=0&loop=1&byline=0&title=0&muted=1&api=1" 
                                        frameborder="0" 
                                        allow="fullscreen"
                                        class="lazy-iframe"></iframe>
                            </div>
                            
                            <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-transparent to-transparent opacity-90 group-hover:opacity-60 transition-opacity pointer-events-none"></div>
                            
                            <div class="absolute bottom-6 left-6 z-20 pointer-events-none">
                                <p class="text-xs font-mono text-gray-400 uppercase tracking-widest mb-2 border-l-2 border-white pl-2">${item.category}</p>
                                <h3 class="text-3xl md:text-4xl font-black leading-none uppercase text-white">${item.title}</h3>
                            </div>
                            
                            <div class="absolute top-4 right-4 glass-btn w-12 h-12 flex items-center justify-center rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 hover:bg-white hover:text-black">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z" /></svg>
                            </div>
                        </div>
                    `;
                });
            }
            gridHTML += `</div><footer class="mt-24 text-center text-xs text-gray-400 uppercase tracking-widest pb-4">© 2026 Ahmet Keles. A Cravis Ltd. Production.</footer></div>`;
            gridSection.innerHTML = gridHTML;
            wrapper.appendChild(gridSection);
            
            // Lazy Load Baslat
            const lazyIframes = document.querySelectorAll('.lazy-iframe');
            lazyIframes.forEach(iframe => lazyLoadObserver.observe(iframe));

            const resizeObserver = new ResizeObserver(() => { updateBoundaries(); });
            resizeObserver.observe(wrapper);
            updateBoundaries();
        }

        // DUZELTME 1 (Scrubbing Logic): Vimeo API ile Oynat/Durdur
        function playPreview(element) {
            const iframe = element.querySelector('iframe');
            // Sadece iframe src yuklenmisse komut gonder
            if(iframe.src && iframe.src.includes('vimeo')) {
                iframe.contentWindow.postMessage('{"method":"play"}', '*');
            }
        }

        function resetPreview(element) {
            const iframe = element.querySelector('iframe');
            if(iframe.src && iframe.src.includes('vimeo')) {
                iframe.contentWindow.postMessage('{"method":"pause"}', '*');
                iframe.contentWindow.postMessage('{"method":"setCurrentTime", "value":0}', '*');
            }
        }
        
        // DUZELTME 3: Mobil Geri Donus Sorunu
        // Sayfa onbellekten geri yuklendiginde (back butonu) videolari canlandir
        window.addEventListener('pageshow', (event) => {
            if (event.persisted) {
                window.location.reload(); 
            }
        });

        // SCROLL LOGIC
        let sections = [];
        let currentY = 0;
        let isAnimating = false;
        let boundaries = [];
        let totalHeight = 0;
        
        function updateBoundaries() {
            sections = Array.from(document.querySelectorAll('section'));
            let total = 0;
            boundaries = sections.map(sec => {
                const start = total;
                total += sec.offsetHeight;
                return { el: sec, start: start, end: start + sec.offsetHeight, type: sec.getAttribute('data-type') };
            });
            totalHeight = total;
            currentY = Math.max(0, Math.min(currentY, totalHeight - window.innerHeight));
            gsap.set(wrapper, { y: -currentY });
        }

        function getCurrentSection(y) {
            const viewportCenter = y + window.innerHeight / 2;
            return boundaries.find(b => viewportCenter >= b.start && viewportCenter < b.end) || boundaries[0];
        }

        window.addEventListener('wheel', (e) => {
            if(document.querySelector('.modal-overlay.active') || document.querySelector('.mobile-menu-overlay.active')) return;
            e.preventDefault();
            if (isAnimating || !boundaries.length) return;

            const currentSec = getCurrentSection(currentY);
            if(!currentSec) return; 
            const targetIndex = boundaries.indexOf(currentSec);

            if (currentSec.type === 'hero') {
                if (e.deltaY > 0) { 
                    const nextSec = boundaries[targetIndex + 1];
                    if (nextSec) scrollToY(nextSec.start);
                } else if (e.deltaY < 0) { 
                    const prevSec = boundaries[targetIndex - 1];
                    if (prevSec) scrollToY(prevSec.start);
                }
                return;
            }

            if (currentSec.type === 'archive') {
                let newY = currentY + e.deltaY;
                const topLimit = currentSec.start;
                const bottomLimit = totalHeight - window.innerHeight;
                if (newY < topLimit - 50 && e.deltaY < 0) {
                    const prevSec = boundaries[targetIndex - 1];
                    if (prevSec) { scrollToY(prevSec.start); return; }
                }
                if (newY < topLimit) newY = topLimit;
                if (newY > bottomLimit) newY = bottomLimit;
                gsap.to(wrapper, { y: -newY, duration: 0.1, ease: "none", overwrite: true });
                currentY = newY;
            }
        }, { passive: false });

        let touchStartY = 0;
        window.addEventListener('touchstart', (e) => { touchStartY = e.touches[0].clientY; }, { passive: false });
        window.addEventListener('touchmove', (e) => {
            if(document.querySelector('.modal-overlay.active') || document.querySelector('.mobile-menu-overlay.active')) return;
            e.preventDefault();
            const touchY = e.touches[0].clientY;
            const deltaY = (touchStartY - touchY) * 1.5;
            touchStartY = touchY;
            if (isAnimating || !boundaries.length) return;
            const currentSec = getCurrentSection(currentY);
            if(!currentSec) return; 

            if (currentSec.type === 'hero') {
                if (Math.abs(deltaY) > 5) {
                     const targetIndex = boundaries.indexOf(currentSec);
                     if (deltaY > 0) { 
                        const nextSec = boundaries[targetIndex + 1];
                        if (nextSec) scrollToY(nextSec.start);
                     } else { 
                        const prevSec = boundaries[targetIndex - 1];
                        if (prevSec) scrollToY(prevSec.start);
                     }
                }
                return;
            }
            if (currentSec.type === 'archive') {
                let newY = currentY + deltaY;
                const topLimit = currentSec.start;
                const bottomLimit = totalHeight - window.innerHeight;
                if (newY < topLimit - 50 && deltaY < 0) {
                     const prevSec = boundaries[boundaries.indexOf(currentSec) - 1];
                     if (prevSec) { scrollToY(prevSec.start); return; }
                }
                if (newY < topLimit) newY = topLimit;
                if (newY > bottomLimit) newY = bottomLimit;
                gsap.to(wrapper, { y: -newY, duration: 0.1, ease: "none", overwrite: true });
                currentY = newY;
            }
        }, { passive: false });

        function scrollToY(target) {
            isAnimating = true;
            gsap.to(wrapper, { y: -target, duration: 0.8, ease: "power2.inOut", onComplete: () => { currentY = target; isAnimating = false; } });
        }
        function scrollToTop() { scrollToY(0); }

        function animateModal(modalId, boxId, show) {
            const modal = document.getElementById(modalId);
            const box = document.getElementById(boxId);
            if (show) {
                modal.classList.add('active');
                gsap.fromTo(box, { scale: 0.95, opacity: 0 }, { scale: 1, opacity: 1, duration: 0.4, ease: "power3.out" });
            } else {
                modal.classList.remove('active');
            }
        }
        function toggleAbout(show) { animateModal('about-modal', 'about-box', show); }
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            const icon = document.getElementById('menu-icon');
            const isActive = menu.classList.contains('active');
            if (!isActive) {
                menu.classList.add('active');
                icon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />';
                gsap.fromTo('.mobile-link', { y: 40, opacity: 0 }, { y: 0, opacity: 1, stagger: 0.15, duration: 0.8, ease: "power3.out" });
            } else {
                menu.classList.remove('active');
                icon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" d="M3.75 9h16.5m-16.5 6.75h16.5" />';
            }
        }

        // --- NEW VIDEO MODAL LOGIC ---
        const modalIframe = document.getElementById('modal-iframe');
        const modalTitle = document.getElementById('modal-title');
        const modalCategory = document.getElementById('modal-category');
        const extraVideosContainer = document.getElementById('extra-videos-container');
        const extraVideosGrid = document.getElementById('extra-videos-grid');

        function openProjectModal(vimeoId, title, category, extraVideos) {
            // Main Video Setup
            modalIframe.src = `https://player.vimeo.com/video/${vimeoId}?autoplay=1&title=0&byline=0&portrait=0`;
            modalTitle.innerText = title;
            modalCategory.innerText = category;
            
            // Extra Videos Setup
            extraVideosGrid.innerHTML = ''; // Temizle
            if (extraVideos && extraVideos.length > 0) {
                extraVideosContainer.classList.remove('hidden');
                extraVideos.forEach(vid => {
                    // Güvenlik kontrolü: Eğer obje ise id'yi al, string ise direkt kullan
                    const vidId = (typeof vid === 'object') ? vid.id : vid;
                    
                    const vidDiv = document.createElement('div');
                    vidDiv.className = 'w-full aspect-video bg-gray-900 rounded-lg overflow-hidden';
                    vidDiv.innerHTML = `<iframe src="https://player.vimeo.com/video/${vidId}?title=0&byline=0" class="w-full h-full" frameborder="0" allow="fullscreen"></iframe>`;
                    extraVideosGrid.appendChild(vidDiv);
                });
            } else {
                extraVideosContainer.classList.add('hidden');
            }

            animateModal('video-modal', 'video-box', true);
        }

        function closeVideoModal() {
            animateModal('video-modal', 'video-box', false);
            setTimeout(() => { modalIframe.src = ""; }, 300);
        }

        if (window.netlifyIdentity) {
            window.netlifyIdentity.on("init", user => { if (!user) window.netlifyIdentity.on("login", () => document.location.href = "/admin/"); });
        }
    </script>
</body>

</html>
